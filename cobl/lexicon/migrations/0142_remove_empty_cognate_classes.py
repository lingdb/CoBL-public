# -*- coding: utf-8 -*-
from __future__ import unicode_literals, print_function
from django.db import migrations

cognateClassIds = set([
    8, 10, 17, 23, 26, 36, 37, 47, 51, 52, 59, 63, 66, 73, 74, 90, 92, 97, 102,
    106, 107, 112, 117, 134, 141, 144, 149, 152, 163, 164, 167, 170, 179, 206,
    277, 297, 345, 354, 355, 373, 376, 379, 381, 383, 387, 393, 395, 397, 409,
    412, 431, 434, 441, 446, 453, 461, 463, 469, 470, 473, 482, 493, 495, 506,
    517, 529, 531, 533, 546, 548, 552, 558, 564, 571, 572, 582, 585, 587, 588,
    591, 597, 610, 612, 635, 637, 638, 643, 669, 677, 679, 681, 685, 702, 706,
    710, 711, 714, 724, 727, 733, 738, 746, 749, 767, 770, 775, 783, 786, 798,
    801, 807, 824, 826, 828, 847, 853, 871, 876, 882, 886, 891, 924, 947, 967,
    988, 990, 1000, 1002, 1008, 1009, 1031, 1033, 1047, 1061, 1066, 1072, 1084,
    1098, 1101, 1113, 1154, 1174, 1204, 1214, 1217, 1221, 1234, 1249, 1280,
    1283, 1284, 1306, 1320, 1340, 1347, 1350, 1351, 1355, 1357, 1360, 1373,
    1374, 1387, 1393, 1405, 1414, 1424, 1435, 1437, 1443, 1444, 1476, 1485,
    1487, 1488, 1493, 1496, 1520, 1521, 1528, 1530, 1557, 1562, 1587, 1589,
    1590, 1595, 1600, 1618, 1627, 1629, 1630, 1632, 1639, 1642, 1644, 1645,
    1646, 1653, 1654, 1670, 1671, 1674, 1675, 1681, 1689, 1695, 1696, 1704,
    1705, 1714, 1717, 1719, 1732, 1748, 1751, 1758, 1760, 1761, 1767, 1769,
    1777, 1778, 1779, 1780, 1781, 1782, 1784, 1785, 1787, 1791, 1793, 1795,
    1801, 1804, 1807, 1810, 1812, 1823, 1824, 1825, 1830, 1832, 1835, 1844,
    1849, 1850, 1854, 1858, 1885, 1899, 1909, 1927, 1928, 1929, 1930, 1931,
    1934, 1939, 1946, 1950, 1958, 1962, 1963, 1966, 1967, 1972, 1974, 1975,
    1976, 1977, 1982, 1983, 1985, 1986, 1989, 1999, 2008, 2015, 2016, 2017,
    2018, 2021, 2024, 2029, 2030, 2037, 2044, 2050, 2054, 2055, 2057, 2064,
    2081, 2084, 2085, 2089, 2091, 2092, 2093, 2094, 2095, 2097, 2105, 2107,
    2111, 2114, 2115, 2116, 2117, 2119, 2121, 2122, 2123, 2124, 2126, 2130,
    2131, 2132, 2134, 2136, 2139, 2154, 2160, 2163, 2174, 2175, 2178, 2181,
    2184, 2185, 2187, 2197, 2202, 2206, 2208, 2218, 2220, 2227, 2229, 2248,
    2251, 2260, 2261, 2262, 2271, 2272, 2275, 2279, 2303, 2310, 2314, 2315,
    2319, 2321, 2328, 2331, 2345, 2353, 2361, 2382, 2388, 2397, 2399, 2403,
    2408, 2417, 2425, 2440, 2441, 2445, 2452, 2453, 2454, 2455, 2460, 2463,
    2487, 2494, 2495, 2499, 2510, 2517, 2520, 2521, 2522, 2523, 2527, 2530,
    2531, 2532, 2548, 2563, 2582, 2598, 2600, 2605, 2615, 2616, 2617, 2624,
    2629, 2635, 2646, 2650, 2659, 2675, 2684, 2692, 2695, 2696, 2697, 2714,
    2715, 2716, 2728, 2733, 2734, 2736, 2739, 2749, 2756, 2760, 2765, 2766,
    2775, 2787, 2812, 2817, 2818, 2830, 2835, 2838, 2848, 2854, 2858, 2859,
    2862, 2872, 2880, 2882, 2885, 2893, 2897, 2899, 2901, 2904, 2907, 2911,
    2940, 2948, 2953, 2957, 2960, 2963, 2966, 2969, 2992, 2999, 3009, 3013,
    3017, 3022, 3026, 3044, 3064, 3065, 3073, 3085, 3098, 3099, 3126, 3134,
    3144, 3156, 3160, 3196, 3199, 3201, 3203, 3207, 3211, 3223, 3234, 3246,
    3251, 3252, 3272, 3290, 3291, 3300, 3306, 3308, 3311, 3320, 3321, 3323,
    3332, 3364, 3380, 3388, 3392, 3394, 3403, 3416, 3440, 3465, 3467, 3476,
    3490, 3505, 3506, 3513, 3514, 3520, 3522, 3579, 3619, 3630, 3633, 3652,
    3655, 3668, 3676, 3678, 3685, 3714, 3718, 3728, 3736, 3806, 3809, 3811,
    3813, 3827, 3834, 3837, 3839, 3842, 3844, 3846, 3852, 3876, 3892, 3896,
    3901, 3906, 3909, 3918, 3926, 3936, 3937, 3976, 3978, 3991, 4000, 4004,
    4005, 4008, 4016, 4026, 4033, 4043, 4050, 4078, 4097, 4099, 4109, 4110,
    4135, 4146, 4153, 4158, 4161, 4162, 4164, 4165, 4166, 4167, 4168, 4170,
    4171, 4173, 4186, 4194, 4260, 4297, 4327, 4333, 4334, 4335, 4363, 4383,
    4386, 4403, 4418, 4427, 4443, 4450, 4453, 4456, 4464, 4471, 4487, 4497,
    4512, 4513, 4515, 4529, 4584, 4590, 4596, 4601, 4613, 4618, 4621, 4667,
    4673, 4674, 4691, 4694, 4695, 4712, 4734, 4736, 4744, 4753, 4757, 4758,
    4826, 4857, 4863, 4868, 4869, 4870, 4871, 4872, 4873, 4874, 4875, 4876,
    4877, 4878, 4879, 4880, 4881, 4882, 4883, 4884, 4885, 4886, 4888, 4892,
    4899, 4904, 4905, 4908, 4917, 4922, 4924, 4926, 4930, 4935, 4936, 4938,
    4947, 4956, 4959, 4972, 4979, 4990, 5005, 5009, 5010, 5014, 5017, 5046,
    5066, 5072, 5075, 5080, 5087, 5088, 5090, 5096, 5099, 5104, 5114, 5165,
    5171, 5174, 5191, 5192, 5201, 5219, 5222, 5241, 5242, 5243, 5244, 5254,
    5263, 5267, 5279, 5288, 5305, 5310, 5315, 5320, 5325, 5326, 5336, 5355,
    5420, 5437, 5439, 5446, 5460, 5464, 5466, 5478, 5481, 5483, 5492, 5510,
    5519, 5524, 5525, 5553, 5595, 5608, 5679, 5711, 5766, 5786, 5851, 5873,
    5874, 5880, 5882, 5883, 5886, 5923, 5929, 5935, 5936, 5939, 5995, 6007,
    6021, 6034, 6039, 6040, 6045, 6048, 6054, 6068, 6071, 6073, 6079, 6080,
    6081, 6124, 6125, 6131, 6139, 6149, 6165, 6184, 6185, 6195, 6203, 6208,
    6229, 6230, 6237, 6244, 6246, 6248, 6250, 6255, 6262, 6285, 6287, 6288,
    6292, 6302, 6304, 6310, 6355, 6357, 6372, 6374, 6382, 6399, 6413, 6451,
    6499, 6515, 6534, 6546, 6567, 6591, 6609, 6612, 6641, 6669, 6706, 6714,
    6782, 6805, 6806, 6830, 6837, 6871, 6877, 6881, 6889, 6913, 6960, 6998,
    7004, 7011, 7016, 7049, 7053, 7066, 7073, 7139, 7151, 7162, 7210, 7225,
    7238, 7242, 7248, 7249, 7251, 7254, 7336, 7346, 7370, 7391, 7417, 7418,
    7423, 7426, 7445, 7483, 7484, 7506, 7553, 7562, 7570, 7572, 7620, 7646,
    7647, 7651, 7658, 7692, 7695, 7699, 7711, 7715, 7716, 7717, 7722, 7723,
    7724, 7725, 7726, 7727, 7776, 7777, 7779, 7786, 7788, 7790, 7801, 7804,
    7805, 7808, 7809, 7810, 7820, 7821, 7834, 7840, 7845, 7846, 7857])


def forwards_func(apps, schema_editor):
    CognateJudgement = apps.get_model("lexicon", "CognateJudgement")
    keepIds = CognateJudgement.objects.filter(
        cognate_class_id__in=cognateClassIds).values_list(
        'cognate_class_id', flat=True)
    deleteIds = cognateClassIds - set(keepIds)

    CognateClass = apps.get_model("lexicon", "CognateClass")
    CognateClass.objects.filter(id__in=deleteIds).delete()


def reverse_func(apps, schema_editor):
    pass


class Migration(migrations.Migration):

    dependencies = [('lexicon', '0141_auto_20161227_1453')]

    operations = [
        migrations.RunPython(forwards_func, reverse_func),
    ]
